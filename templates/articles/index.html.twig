{% extends 'base.html.twig' %}

{% block title %}Articles index
{% endblock %}

{% block header %}
	<div class="container">
		<div class="text-center">
			<h1>Historique de tout les articles</h1>
		</div>
	</div>
{% endblock %}

{% block section %}

	<div class="container">
		<div class="d-flex flex-row flex-wrap justify-content-center d-grid gap-2">
			{% for article in articles %}
				<div class="card" style="width: 18rem;">
					<img src="..." class="card-img-top" alt="...">
					<div class="card-body">
						<h6 class='text-end text-info'>{{article.tags.name}}</h6>
						<h5 class="card-title">{{ article.title }}</h5>
						<p class="card-text">{{ article.article|u.truncate(155)|striptags }}...</p>
						<p>
							<strong>Publié :
							</strong>
							{{ article.publishedAt|format_datetime(locale='fr',pattern="EEEE dd MMMM YYYY") }}</p>
						{% if article.modifiedAt %}
							<p>
								<strong>Modifié :
								</strong>
								{{ article.publishedAt|format_datetime(locale='fr',pattern="EEEE dd MMMM YYYY") }}</p>
						{% endif %}
						<div class="d-flex flex-row d-grid gap-2">
							<div class="">
								<a href="{{ path('app_articles_show', {'slug': article.slug}) }}" class="btn btn-primary">Lire</a>
							</div>
                            {% if is_granted('EDIT_ARTICLE',article) %}
                                <div class="">
                                    <a href="{{ path('app_articles_edit', {'slug': article.slug}) }}" class="btn btn-primary">Editer</a>
                                </div>
                            {% endif %}
                            {% if is_granted('DELETE_ARTICLE',article) %}
                                <div class="">
                                    <a href="{{ path('app_articles_delete', {'id': article.id}) }}" class="btn btn-danger">Supprimer</a>
                                </div>
                            {% endif %}
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>


	{# <table class="table">
			<thead>
				<tr>
					<th>Id</th>
					<th>Title</th>
					<th>Slug</th>
					<th>Article</th>
					<th>PublishedAt</th>
					<th>ModifiedAt</th>
					<th>Draft</th>
					<th>actions</th>
				</tr>
			</thead>
			<tbody>
				{% for article in articles %}
	
					{{ article.article|raw }}
					<tr>
						<td>{{ article.id }}</td>
						<td>{{ article.title }}</td>
						<td>{{ article.slug }}</td>
						<td>{{ article.article }}</td>
						<td>{{ article.publishedAt ? article.publishedAt|date('Y-m-d H:i:s') : '' }}</td>
						<td>{{ article.modifiedAt ? article.modifiedAt|date('Y-m-d H:i:s') : '' }}</td>
						<td>{{ article.draft ? 'Yes' : 'No' }}</td>
						<td>
							<a href="{{ path('app_articles_show', {'slug': article.slug}) }}">show</a>
							<a href="{{ path('app_articles_edit', {'id': article.id}) }}">edit</a>
						</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="8">no records found</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	
		<a href="{{ path('app_articles_new') }}">Create new</a> #}
{% endblock %}
